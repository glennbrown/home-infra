---
# LXC Containers
- hosts: lxc
  remote_user: root
  gather_facts: true
  vars_files:
    - 'vars/vault.yml'
    - 'vars/secrets_lookup.yml'

  roles:
    - role: apt-mirror
    - role: base

  tasks:
    - name: Set timezone
      timezone:
        name: 'America/New_York'

  post_tasks:
    - name: Update Debian system
      apt:
        name: '*'
        update_cache: yes
        state: latest
      when: ansible_os_family == 'Debian'
    - name: Update Redhat system
      dnf:
        name: '*'
        update_cache: yes
        state: latest
      when: ansible_os_family == 'Redhat'
    - name: Reboot host
      reboot: